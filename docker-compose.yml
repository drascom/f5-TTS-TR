services:
  f5-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: f5-turkish-api
    ports:
      - "8000:8000"
    environment:
      F5_MODEL_NAME: "F5TTS_Base"
      F5_CKPT_FILE: "/app/f5_tts_turkish_800000.safetensors"
      F5_VOCAB_FILE: "/app/vocab.txt"
      F5_REFERENCE_WAV: "/app/tr.wav"
      F5_REFERENCE_TEXT: ""
      F5_DEVICE: "cuda"
      F5_REMOVE_SILENCE: "false"
      HF_HOME: "/hf-cache"
      NVIDIA_VISIBLE_DEVICES: "all"
      NVIDIA_DRIVER_CAPABILITIES: "compute,utility"
    gpus: all
    volumes:
      - ./f5_tts_turkish_800000.safetensors:/app/f5_tts_turkish_800000.safetensors:ro
      - ./vocab.txt:/app/vocab.txt:ro
      - ./tr.wav:/app/tr.wav:ro
      - hf-cache:/hf-cache
    restart: unless-stopped

volumes:
  hf-cache:
